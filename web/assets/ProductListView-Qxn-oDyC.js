import{g as v}from"./apiConfig-B6_P2rPa.js";import{d as f,r as d,b,e as y,c as x,a as C,f as t,w as l,g as r,h as P,o as k,_ as T}from"./index-B8qFLkXp.js";const V={class:"product-list"},z={class:"table-container"},N=f({__name:"ProductListView",setup(A){const s=d([]),c=d(1),i=d(10),p=b(()=>{const e=(c.value-1)*i.value,o=e+i.value;return s.value.slice(e,o)}),_=e=>{c.value=e},u=async()=>{try{const e=await fetch(v("/api/goods_list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!e.ok)throw new Error(`HTTP ${e.status}`);const o=await e.json();s.value=Array.isArray(o)?o:o?.data??[]}catch(e){console.error("加载商品列表失败",e),s.value=[]}};return y(()=>{u()}),(e,o)=>{const a=r("el-table-column"),g=r("el-image"),h=r("el-link"),m=r("el-table"),w=r("el-pagination");return k(),x("div",V,[C("div",z,[t(m,{data:p.value,stripe:"",resizable:""},{default:l(()=>[t(a,{prop:"id",label:"ID",width:"120"}),t(a,{prop:"goods_name",label:"商品名称",width:"200","show-overflow-tooltip":""}),t(a,{label:"商品图片",width:"150"},{default:l(n=>[t(g,{style:{width:"80px",height:"80px"},src:n.row.goods_img,"preview-src-list":[n.row.goods_img],fit:"cover"},null,8,["src","preview-src-list"])]),_:1}),t(a,{prop:"shop_code",label:"店铺代码",width:"150"}),t(a,{label:"操作",width:"120"},{default:l(n=>[t(h,{type:"primary",href:n.row.goods_detail_url,target:"_blank"},{default:l(()=>[...o[0]||(o[0]=[P("查看详情",-1)])]),_:1},8,["href"])]),_:1})]),_:1},8,["data"]),t(w,{onCurrentChange:_,"current-page":c.value,"page-size":i.value,layout:"prev, pager, next",total:s.value.length},null,8,["current-page","page-size","total"])])])}}}),j=T(N,[["__scopeId","data-v-09ce5c57"]]);export{j as default};
